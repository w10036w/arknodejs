webpackJsonp([5],[,function(t,e){t.exports=function(t,e,n,r){var i,o=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(i=t,o=t.default);var s="function"==typeof o?o.options:o;if(e&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns),n&&(s._scopeId=n),r){var c=s.computed||(s.computed={});Object.keys(r).forEach(function(t){var e=r[t];c[t]=function(){return e}})}return{esModule:i,exports:o,options:s}}},function(t,e,n){"use strict";var r=n(5),i=n.n(r),o=n(75),a=n.n(o),s=n(52),c=s.a.prefix,u=s.a.isServer;e.a={fetchItem:function(t,e,n){var r=c+"/"+t+"/"+e+"?"+a.a.stringify(n);return i.a.get(r).then(function(t){var e=t.data;return u&&s.a.cache.set(r,e),e})},fetchAll:function(t,e){var n=c+"/"+t,r=n+JSON.stringify(e);return i.a.get(n,{params:e}).then(function(t){var e=t.data;return u&&s.a.cache.set(r,e),e})},post:function(t,e){var n=c+"/"+t;return i.a.post(n,e).then(function(t){return t.data})},patch:function(t,e){var n=e.id,r=e.body,o=c+"/"+t+"/"+n;return i.a.patch(o,r).then(function(t){return t.data})},follow_user:function(t,e){var n=c+"/user/following/"+t+"?action="+e;return i.a.patch(n).then(function(t){return t.data})},favorite_topic:function(t,e){var n=c+"/user/favorite/"+t+"?action="+e;return i.a.patch(n).then(function(t){return t.data})},join_group:function(t,e){var n=c+"/user/group/"+t+"?action="+e;return i.a.patch(n).then(function(t){return t.data})},is_following:function(t){var e=c+"/user/is_following/"+t;return i.a.get(e).then(function(t){return t.data})},is_favorited:function(t){var e=c+"/topic/is_favorited/"+t;return i.a.get(e).then(function(t){return t.data})},cdnToken:function(t){return i.a.post(c+"/cdn/token?name="+t).then(function(t){return t.data})},cdnImgUpload:function(t,e,n){var r=new FormData;return r.append("file",e,e.name),r.append("key",t),r.append("token",n),i.a.post("//up.qbox.me/",r).then(function(t){return t.data})},cdnVideoUpload:function(t,e,n){}}},,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"c",function(){return f});var r=n(3),i=n(76),o=n.n(i),a=n(53),s=n(51),c=n(11),u=(n.n(c),n(50));n.d(e,"b",function(){return s.a}),n.d(e,"a",function(){return a.a});var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.i(c.sync)(a.a,s.a),Object.keys(u).forEach(function(t){return r.default.filter(t,u[t])});var f=l({router:s.a,store:a.a},o.a);s.a.beforeEach(function(t,e,n){var r=t.matched.find(function(t){return t.meta.auth});if(r){var i=r.meta.auth,o=a.a.state.login_user;"guest"===i?o._id?n():n({path:"/login",query:{redirect:t.fullPath}}):"editor"===i&&(o._id&&"editor"===o.role?n():n({path:"/login",query:{redirect:t.fullPath}}))}else n()})},function(t,e,n){"use strict";t.exports=n(8).polyfill()},function(t,e){e.popupCenter=function(t,e,n){var r=void 0!=window.screenLeft?window.screenLeft:screen.left,i=void 0!=window.screenTop?window.screenTop:screen.top,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,s=o/2-e/2+r,c=a/2-n/2+i;window.open(t,"_blank","width="+e+",height="+n+",top="+c+", left="+s+",\n\t\t\tdirectories=no,status=no,menubar=no,scrollbars=no,resizable=no,copyhistory=no").focus()},e.fileReader=function(t,e){return e=e||{},new Promise(function(n,r){var i=new FileReader;i.onload=function(){n(i)},i.onerror=r,e.accept&&!new RegExp(e.accept).test(t.type)&&r({code:400,note:"wrong file type"}),!t.type||/^text\//i.test(t.type)?i.readAsText(t):i.readAsDataURL(t)})},e.ifBtm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.innerHeight+t.scrollY>=document.body.scrollHeight-e},e.smoothScroll=function(t,e){function n(){(Math.abs(o-e)>.1||Math.abs(a-t)>.1)&&(o-=s,a-=c,i?r.scrollTo(a,o):(r.scrollTop=o,r.scrollLeft=a),requestAnimationFrame(n))}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,i=r===window,o=i?window.scrollY:r.scrollTop,a=i?window.scrollX:r.scrollLeft,s=(r.scrollHeight,(o-e)/30),c=(a-t)/30;setTimeout(function(){requestAnimationFrame(n)},0)}},,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(79),i=n.n(r),o=n(78),a=n.n(o),s=n(77),c=n.n(s),u=n(5),l=n.n(u);e.default={name:"app",components:{NavBar:i.a,FootBar:a.a,WDialog:c.a},beforeMount:function(){var t=this,e=window.localStorage.token;e&&(l.a.interceptors.request.use(function(t){return"get"===l.a.method?t:(t.headers.authorization=e,t)},function(t){return Promise.reject(t)}),l.a.get("/api/verify_token").then(function(e){if(!(e.data.code>200))return t.$store.dispatch("login",e.data.data),e.data.data}).then(function(t){}))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(4),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=(r={name:"widget-dialog",data:function(){return{tag:{name:"",path:""},category:{name:"",path:""}}},computed:{call:function(){return this.$refs.add_category}},watch:{"tag.name":function(){this.tag.path=this.tag.name.toLowerCase().replace(/\s+/g,"-")},"category.name":function(){this.category.path=this.category.name.toLowerCase().replace(/\s+/g,"-")}}},r.computed=o({},n.i(i.mapGetters)(["dialog","tag_list","category_list"])),r.methods={addTag:function(){var t=this,e=this.tag.name,n=this.tag.path;this.$store.dispatch("create_tag",{name:e,path:n}).then(function(e){e.code>200&&(t.$store.dispatch("fetch_tags"),t.tag.name="",t.closeDialog())})},addCategory:function(){var t=this,e=this.category.name,n=this.category.path;this.$store.dispatch("create_category",{name:e,path:n}).then(function(e){e.code>200&&(t.category.name="",t.$store.dispatch("fetch_categories"),t.closeDialog())})},closeDialog:function(){this.$store.dispatch("dialog","")}},r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"foot-bar"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default={name:"nav-bar",data:function(){return{show_user_list:!1,show_notice_list:!1}},computed:i({},n.i(r.mapGetters)(["login_user","message_list"])),watch:{"$route.path":function(){this.show_user_list=!1}},methods:{toggleUserList:function(){this.show_user_list=!this.show_user_list},toggleNoticeList:function(){this.show_notice_list=!this.show_notice_list}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"page-404"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(20);n.n(r);e.default={name:"page-login",data:function(){return{msg:""}},methods:{login:function(t){var e="https://"+location.host+"/api/auth/"+t;n.i(r.popupCenter)(e,600,400)}},mounted:function(){this.$route.query.redirect&&(window.sessionStorage.redirect=this.$route.query.redirect),this.msg=window.sessionStorage.info}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"page-logout",methods:{logout:function(){localStorage.removeItem("token"),location.href="/"}},beforeMount:function(){this.logout()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:""}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:""}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:""}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:""}},function(t,e,n){"use strict";function r(t,e){return Array.prototype.concat.apply([],t.matched.map(function(t,n){return Object.keys(t.components).map(function(r){return e(t.components[r],t.instances[r],t,r,n)})}))}function i(t){var e=window.location.pathname;return t&&0===e.indexOf(t)&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}Object.defineProperty(e,"__esModule",{value:!0}),e.flatMapComponents=r,e.getLocation=i;var o=n(19),a=(n.n(o),n(3)),s=n(18);s.a.replaceState(window.__INITIAL_STATE__);var c=i(s.b.options.base),u=r(s.b.match(c),function(t,e,n,r,i){return"function"!=typeof t||t.options?t:new Promise(function(e,i){var o=function(t){n.components[r]=t,e(t)},a=t(o,i);a&&a.then&&a.then(o).catch(i)})});Promise.all(u).then(function(t){var e=new a.default(s.c);s.a.replaceState(window.__INITIAL_STATE__),e.$mount("#app")}).catch(function(t){console.error("Cannot load components",t)}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")},function(t,e,n){"use strict";function r(t){var e=t.replace(/^https?:\/\//,"").replace(/\/.*$/,""),n=e.split(".").slice(-3);return"www"===n[0]&&n.shift(),n.join(".")}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=t.length>e?"...":"";return t.slice(0,e)+n}function o(t){return t.substr(t.lastIndexOf("/")+1)}function a(t){var e=Date.now()/1e3-Number(t);return e<3600?f(~~(e/60)," min"):e<86400?f(~~(e/3600)," hr"):f(~~(e/86400)," day")}function s(t){return a(new Date(t).getTime()/1e3)}function c(t){if(!t)return"";var e=new Date(t).toString();return e.substr(16,5)+", "+e.substr(8,3)+" "+e.substr(4,4)+" "+e.substr(11,4)}function u(t){return t?c(new Date(t).getTime()):""}function l(t){if(t<1e3)return t;if(t>1e6)return(t/1e6).toFixed(1)+"m";var e=t/1e3;return e<10?e.toFixed(2)+"k":e<100?e.toFixed(1)+"k":Math.floor(e)+"k"}function f(t,e){return 1===t?t+e:t+e+"s"}Object.defineProperty(e,"__esModule",{value:!0}),e.host=r,e.ellipsis=i,e.fileName=o,e.ts2timeAgo=a,e.std2timeAgo=s,e.ts2hiDdmy=c,e.std2hiDdmy=u,e.fmtNum=l},function(t,e,n){"use strict";var r=n(3),i=n(10),o=n(9),a=n.n(o),s=n(80),c=n.n(s),u=n(81),l=n.n(u),f=n(82),d=n.n(f),p=n(86),_=n.n(p),h=n(85),m=n.n(h),v=n(83),g=(n.n(v),n(84));n.n(g);r.default.use(i.default),r.default.use(a.a);var y=function(){return n.e(1).then(n.bind(null,106))},w=function(){return n.e(4).then(n.bind(null,103))},b=function(){return n.e(2).then(n.bind(null,105))},C=function(){return n.e(0).then(n.bind(null,104))},S=function(){return n.e(3).then(n.bind(null,102))};e.a=new i.default({mode:"history",scrollBehavior:function(t,e,n){return n||(t.hash?{selector:t.hash}:{x:0,y:0})},routes:[{path:"/",name:"view-home-topics",component:b},{path:"/login",name:"page-login",component:l.a},{path:"/logout",name:"page-logout",component:d.a},{path:"/user/:username",name:"view-user",component:y},{path:"/edit/user/:username",name:"edit-user",component:w},{path:"/create/topic",name:"create-topic",component:S},{path:"/edit/topic/:path",name:"edit-topic",component:S},{path:"/topic",name:"view-topics",component:b},{path:"/topic/:path",name:"view-topic",component:C},{path:"/tag",name:"view-tags",component:_.a},{path:"/tag/:path",name:"view-tag",component:m.a},{path:"/404",name:"page-404",component:c.a},{path:"*",name:"page-redirect-404",component:c.a}]})},function(t,e,n){"use strict";e.a={prefix:"/api",isServer:!1}},function(t,e,n){"use strict";var r=n(3),i=n(4),o=n(59),a=n(58),s=n(56),c=n(54),u=n(57),l=n(60),f=n(55),d=n(2);r.default.use(i.default),e.a=new i.default.Store({modules:{user:o.a,topic:a.a,reply:s.a,category:c.a,tag:u.a,message:f.a,widget:l.a},state:{loading:!1,progress:0,login_user:{},logs:[],flash:[],ws:null},getters:{login_user:function(t){return t.login_user},logs:function(t){return t.logs},flash:function(t){return t.flash}},actions:{login:function(t,e){return(0,t.commit)("LOGIN",e),e},logout:function(t){(0,t.commit)("LOGOUT")},logger:function(t,e){(0,t.commit)("LOG",e)},clear_flash:function(t){(0,t.commit)("CLEAR_FLASH")},cdn_token:function(t,e){t.commit;return d.a.cdnToken(e)},cdn_img_upload:function(t,e){var n=(t.commit,e.key),r=e.file,i=e.token;return d.a.cdnImgUpload(n,r,i)},ws_connect:function(t,e){(0,t.commit)("WS_CONNECT",e)}},mutations:{LOGIN:function(t,e){t.login_user=e},LOGOUT:function(t){t.login_user=null},LOG:function(t,e){t.logs.push(e),t.flash.push(e),setTimeout(function(){var n=t.flash.indexOf(e)>-1;n&&t.flash.splice(n,1)},5e3)},CLEAR_FLASH:function(t){t.flash=[]},WS_CONNECT:function(t,e){t.ws=e}}})},function(t,e,n){"use strict";var r=n(2);e.a={state:{list:[]},getters:{category_list:function(t){return t.list}},actions:{fetch_categories:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.a.fetchAll("category",n).then(function(t){return e("CATEGORY_SET_LIST",t),t})},create_category:function(t,e){var n=t.commit;return r.a.post("category",e).then(function(t){return n("LOG",t),t})}},mutations:{CATEGORY_SET_LIST:function(t,e){var n=e.code,r=e.data;200===n&&r.length?t.list=r:t.list=[]}}}},function(t,e,n){"use strict";var r=n(2);e.a={state:{list:[]},getters:{message_list:function(t){return t.list}},actions:{fetch_messages:function(t,e){var n=t.commit,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.criteria=i.criteria||{beRead:!1},i.limit=i.limit||11,r.a.fetchItem("message",e,i).then(function(t){return n("MESSAGE_SET_LIST",t),t})},read_message:function(t,e){var n=t.commit,i={beRead:!0};return r.a.patch("message",{id:e,body:i}).then(function(t){return n("MESSAGE_READ_ONE",e),t})}},mutations:{MESSAGE_SET_LIST:function(t,e){var n=e.code,r=e.data;200===n&&r.length?t.list=r:t.list=[]},MESSAGE_READ_ONE:function(t,e){var n=t.list.findIndex(function(t){return t._id===e});t.list.splice(n,1)}}}},function(t,e,n){"use strict";var r=n(2);e.a={state:{curr:{}},getters:{reply_curr:function(t){return t.curr},reply_list:function(t){return t.list}},actions:{create_reply:function(t,e){var n=t.commit,i=e.body;return r.a.post("reply",i).then(function(t){return t.name="create_reply",n("LOG",t),t})},update_reply:function(t,e){var n=t.commit,i=e.id,o=e.body;return r.a.patch("reply",{id:i,body:o}).then(function(t){return t.name="update_reply ("+i+")",n("LOG",t),t})},reply_reply:function(t,e){(0,t.commit)("REPLY_REPLY",e)},edit_reply:function(t,e){var n=t.commit,r=t.rootState,i=r.topic.curr_replys;i.length&&e&&n("EDIT_REPLY",{list:i,id:e})}},mutations:{REPLY_SET_LIST:function(t,e){var n=e.code,r=e.data;200===n&&r.length?t.list=r:t.list=[]},REPLY_REPLY:function(t,e){t.curr={replyToUsername:e}},EDIT_REPLY:function(t,e){var n=e.list,r=e.id;if(!r)return void(t.curr={});for(var i=n.length;i--;)n[i]._id===r&&(t.curr=n[i])}}}},function(t,e,n){"use strict";var r=n(2);e.a={state:{list:[]},getters:{tag_list:function(t){return t.list}},actions:{fetch_tags:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.a.fetchAll("tag",n).then(function(t){return e("TAG_SET_LIST",t),t})},create_tag:function(t,e){var n=t.commit;return r.a.post("tag",e).then(function(t){return n("LOG",t),t})}},mutations:{TAG_SET_LIST:function(t,e){var n=e.code,r=e.data;200===n&&r.length?t.list=r:t.list=[]}}}},function(t,e,n){"use strict";var r=n(2),i={_id:"",title:"Topic Not Found",path:"topic-not-found",thumbnail:"",content:"",authorId:"",hidden:!1,updateAt:"",createAt:Date.now(),lastReplyAt:"",visitCount:0,replyCount:0,likedUsers:[],status:1,tags:[],type:"text"};e.a={state:{list:[],list_next:[],curr:{authorInfo:{},categoryInfo:{},tagsInfo:[]},curr_replys:[],prev:{},next:{}},getters:{topic_list:function(t){return t.list},topic_list_next:function(t){return t.list_next},topic_curr:function(t){return t.curr},topic_curr_replys:function(t){return t.curr_replys},topic_prev:function(t){return t.prev},topic_next:function(t){return t.next}},actions:{fetch_topic:function(t,e){var n=t.commit,i=e.path,o=e.query;return r.a.fetchItem("topic",i,o).then(function(t){if(n("TOPIC_SET_CURR",t),t.code>200)return Promise.reject(t);var e=t.data._id,i={_id:{$lt:e},hidden:!1},o={_id:{$gt:e},hidden:!1};return Promise.all([r.a.fetchAll("topic",{criteria:i,select:"_id title path",sort:{_id:-1},limit:1}),r.a.fetchAll("topic",{criteria:o,select:"_id title path",limit:1})]).then(function(e){var r=e[0],i=e[1];return n("TOPIC_SET_PREV",r),n("TOPIC_SET_NEXT",i),t})})},fetch_topic_replys:function(t){var e=t.commit,n=t.state,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.curr._id;i.criteria=i.criteria||JSON.stringify({topicId:o}),i.sort=i.sort||JSON.stringify({_id:-1}),i.limit=i.limit||30,i.skip=i.skip||0;var a=i._init||!0;return r.a.fetchAll("reply",i).then(function(t){return t.code>200&&(t.name="fetch_topic_replys["+(a?"initial":"more")+"] (topicId:"+o+") failed",e("LOG",t)),t._init=a,e("TOPIC_SET_CURR_REPLYS",t),t})},fetch_topics:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.sort=n.sort||JSON.stringify({_id:-1}),n.limit=n.limit||30,r.a.fetchAll("topic",n).then(function(t){return e(n.count?"TOPIC_SET_LIST_NEXT":"TOPIC_SET_LIST",t),t})},create_topic:function(t,e){var n=t.commit;return r.a.post("topic",e).then(function(t){return t.name="create_topic",n("LOG",t),t})},update_topic:function(t,e){var n=t.commit,i=e.id,o=e.body;return r.a.patch("topic",{id:i,body:o}).then(function(t){return t.name="update_topic ("+i+")",n("LOG",t),t})},_favorite_topic:function(t,e){return(0,t.commit)("_TOPIC_FAVORITE_CURR",{userId:e.userId,action:e.action})}},mutations:{TOPIC_SET_CURR:function(t,e){var n=e.code,r=e.data;200===n&&r?(r.visitCount++,t.curr=r):t.curr=i},TOPIC_SET_CURR_REPLYS:function(t,e){var n=e.code,r=e.data;t.curr_replys=200===n?r:[]},TOPIC_SET_PREV:function(t,e){var n=e.code,r=e.data;200===n&&r.length?t.prev=r[0]:t.prev=i},TOPIC_SET_NEXT:function(t,e){var n=e.code,r=e.data;200===n&&r.length?t.next=r[0]:t.next=i},TOPIC_SET_LIST:function(t,e){var n=e.code,r=e.data;200===n&&r.length?t.list=r:t.list=[]},TOPIC_SET_LIST_NEXT:function(t,e){var n=e.code,r=e.data;200===n&&r.length?t.list_next=r:t.list_next=[]},_TOPIC_FAVORITE_CURR:function(t,e){var n=e.userId;if("unfavorite"===e.action){var r=t.curr.likedUsers.indexOf(n);t.curr.likedUsers.splice(r,1)}else t.curr.likedUsers.push(n)}}}},function(t,e,n){"use strict";var r=n(2),i=n(61),o=n.n(i),a={_id:""};e.a={state:{curr:{},curr_topics:[],curr_replys:[],curr_favorites:[],curr_followings:[],curr_followers:[],curr_is_following:!1,list:[]},getters:{user_curr:function(t){return t.curr},user_curr_topics:function(t){return t.curr_topics},user_curr_replys:function(t){return t.curr_replys},user_curr_favorites:function(t){return t.curr_favorites},user_curr_followings:function(t){return t.curr_followings},user_curr_followers:function(t){return t.curr_followers},user_curr_is_following:function(t){return t.curr_is_following},user_list:function(t){return t.list}},actions:{fetch_user:function(t,e){var n=t.commit;return r.a.fetchItem("user",e).then(function(t){return n("USER_SET_CURR",t),t})},fetch_user_topics:function(t){var e=t.commit,n=t.state,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.curr._id;i.criteria=i.criteria||JSON.stringify({authorId:a}),i.select=i.select||o.a.topic.sameUser,i.sort=i.sort||JSON.stringify({_id:-1}),i.limit=i.limit||10;var s=void 0===i._init||i._init;return r.a.fetchAll("topic",i).then(function(t){return t.code>200&&(t.name="fetch_user_topics["+(s?"initial":"more")+"] (authorId:"+a+") failed",e("LOG",t)),t._init=s,e("USER_SET_CURR_TOPICS",t),t})},fetch_user_favorites:function(t){var e=t.commit,n=t.state,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={$in:n.curr.favorites};i.criteria=i.criteria||JSON.stringify({_id:a}),i.select=i.select||o.a.topic.sameUser,i.sort=i.sort||JSON.stringify({_id:-1}),i.limit=i.limit||10;var s=void 0===i._init||i._init;return r.a.fetchAll("topic",i).then(function(t){return t.code>200&&(t.name="fetch_user_favorites["+(s?"initial":"more")+"] (userId:"+userId+") failed",e("LOG",t)),t._init=s,e("USER_SET_CURR_FAVORITES",t),t})},fetch_user_replys:function(t){var e=t.commit,n=t.state,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.curr._id;i.criteria=i.criteria||JSON.stringify({authorId:o}),i.sort=i.sort||JSON.stringify({_id:-1}),i.limit=i.limit||20,i.skip=i.skip||0;var a=void 0===i._init||i._init;return r.a.fetchAll("reply",i).then(function(t){return t.code>200&&(t.name="fetch_user_replys["+(a?"initial":"more")+"] (authorId:"+o+") failed",e("LOG",t)),t._init=a,e("USER_SET_CURR_REPLYS",t),t})},fetch_user_followings:function(t){var e=t.commit,n=t.state,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.curr.followings;if(!a.length){var s={code:200,data:[],time:Date.now(),_init:!0};return e("USER_SET_CURR_FOLLOWINGS",s),s}i.ids=a.join("+"),i.select=i.select||o.a.user.follower,i.sort=i.sort||JSON.stringify({_id:-1}),i.limit=i.limit||30;var c=void 0===i._init||i._init;return r.a.fetchAll("user",i).then(function(t){return t.code>200&&(t.name="fetch_user_followings["+(c?"initial":"more")+"] (userId:"+n.curr._id+") failed",e("LOG",t)),t._init=c,e("USER_SET_CURR_FOLLOWINGS",t),t})},fetch_user_followers:function(t){var e=t.commit,n=t.state,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.curr.followers;if(!a.length){var s={code:200,data:[],time:Date.now(),_init:!0};return e("USER_SET_CURR_FOLLOWERS",s),s}i.ids=a.join("+"),i.select=i.select||o.a.user.follower,i.sort=i.sort||JSON.stringify({_id:-1}),i.limit=i.limit||30;var c=void 0===i._init||i._init;return r.a.fetchAll("user",i).then(function(t){return t.code>200&&(t.name="fetch_user_followers["+(c?"initial":"more")+"] (userId:"+n.curr._id+") failed",e("LOG",t)),t._init=c,e("USER_SET_CURR_FOLLOWERS",t),t})},follow_user:function(t,e){var n=t.commit,i=e.id,o=e.action;return r.a.follow_user(i,o).then(function(t){return t.name=("unfollow"===o?"un":"")+"follow user("+i+")",n("LOG",t),t})},favorite_topic:function(t,e){var n=t.commit,i=e.id,o=e.action;return r.a.favorite_topic(i,o).then(function(t){return t.name=("unfavorite"===o?"un":"")+"favorite topic("+i+")",n("LOG",t),t})},join_group:function(t,e){var n=t.commit,i=e.id,o=e.action;return r.a.join_group(i,o).then(function(t){return t.name=("leave"===o?"leave":"join")+" group("+i+")",n("LOG",t),t})},is_following:function(t,e){var n=t.commit,i=e.id;return r.a.is_following(i).then(function(t){200===t.code&&n("USER_SET_CURR_IS_FOLLOWING",t.data.isFollowing)})},is_favorited:function(t,e){var n=(t.commit,e.id);return r.a.is_favorited(n)},update_user:function(t,e){var n=(t.commit,e.id),i=e.body;return r.a.patch("user",{id:n,body:i})}},mutations:{USER_SET_CURR:function(t,e){var n=e.code,r=e.data;t.curr=n>200?a:r},USER_SET_CURR_TOPICS:function(t,e){var n,r=e.data;e._init?t.curr_topics=r:(n=t.curr_topics).push.apply(n,r)},USER_SET_CURR_REPLYS:function(t,e){var n,r=e.data;e._init?t.curr_replys=r:(n=t.curr_replys).push.apply(n,r)},USER_SET_CURR_FAVORITES:function(t,e){var n,r=e.data;e._init?t.curr_favorites=r:(n=t.curr_favorites).push.apply(n,r)},USER_SET_CURR_FOLLOWINGS:function(t,e){var n,r=e.data;e._init?t.curr_followings=r:(n=t.curr_followings).push.apply(n,r)},USER_SET_CURR_FOLLOWERS:function(t,e){var n,r=e.data;e._init?t.curr_followers=r:(n=t.curr_followers).push.apply(n,r)},USER_SET_CURR_IS_FOLLOWING:function(t,e){t.curr_is_following=e}}}},function(t,e,n){"use strict";e.a={state:{dialog:"",navbar:"",footer:""},getters:{dialog:function(t){return t.dialog}},mutations:{DIALOG:function(t,e){t.dialog=e}},actions:{dialog:function(t,e){(0,t.commit)("DIALOG",e)}}}},function(t,e){e.user={follower:"_id username displayName avatar level bio followers followings favorites "},e.topic={sameUser:"_id title path thumbnail authorId category tags replyCount visitCount lastReplyAt"}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=t.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var f,d,p,_,h=t[l].replace(s,"%20"),m=h.indexOf(n);m>=0?(f=h.substr(0,m),d=h.substr(m+1)):(f=h,d=""),p=decodeURIComponent(f),_=decodeURIComponent(d),r(a,p)?i(a[p])?a[p].push(_):a[p]=[a[p],_]:a[p]=_}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(a(t),function(a){var s=encodeURIComponent(i(a))+n;return o(t[a])?r(t[a],function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[a]))}).join(e):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";e.decode=e.parse=n(73),e.encode=e.stringify=n(74)},function(t,e,n){n(69);var r=n(1)(n(38),n(95),null,null);t.exports=r.exports},function(t,e,n){n(67);var r=n(1)(n(39),n(93),null,null);t.exports=r.exports},function(t,e,n){n(62);var r=n(1)(n(40),n(87),null,null);t.exports=r.exports},function(t,e,n){n(63);var r=n(1)(n(41),n(88),null,null);t.exports=r.exports},function(t,e,n){n(68);var r=n(1)(n(42),n(94),null,null);t.exports=r.exports},function(t,e,n){n(64);var r=n(1)(n(43),n(89),null,null);t.exports=r.exports},function(t,e,n){var r=n(1)(n(44),n(91),null,null);t.exports=r.exports},function(t,e,n){n(66);var r=n(1)(n(45),n(92),null,null);t.exports=r.exports},function(t,e,n){n(71);var r=n(1)(n(46),n(97),null,null);t.exports=r.exports},function(t,e,n){n(65);var r=n(1)(n(47),n(90),null,null);t.exports=r.exports},function(t,e,n){n(70);var r=n(1)(n(48),n(96),null,null);t.exports=r.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"foot-bar"},[t._v("\n\t© 2017 - ArkNodeJs - w10036w - "),n("a",{attrs:{href:"https://github.com/w10036w/arknodejs",target:"_blank"}},[t._v("Source Code")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"nav-bar"},[n("div",{staticClass:"wide-screen row"},[n("router-link",{attrs:{to:"/"}},[n("div",{staticClass:"left logo flex between_center"},[n("img",{attrs:{height:"40",src:"/favicon/apple-icon-57x57.png"}}),n("span",[t._v("ArkNodeJs")])])]),t.login_user._id?n("div",{staticClass:"nav-guest right"},[n("div",{staticClass:"btn nav-btn-box"},[n("router-link",{attrs:{to:{name:"create-topic"}}},[n("i",{staticClass:"fa fa-file"})])],1),n("div",{staticClass:"btn nav-btn-box"},[n("span",{on:{click:t.toggleNoticeList}},[n("i",{staticClass:"fa fa-bell"})])]),n("transition",{attrs:{name:"slide-top"}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:t.show_notice_list,expression:"show_notice_list"}],staticClass:"nav-toggle-list nav-toggle-list-message rad-4 center"},t._l(t.message_list,function(t){return n("li")}))]),n("div",{staticClass:"btn nav-btn-box",on:{click:t.toggleUserList}},[n("span",[t._v(t._s(t.login_user.displayName)+" "),n("i",{staticClass:"fa trans_200",class:t.show_user_list?"fa-caret-up":"fa-caret-down"})])]),n("transition",{attrs:{name:"slide-top"}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:t.show_user_list,expression:"show_user_list"}],staticClass:"nav-toggle-list rad-4 center"},[n("li",[n("router-link",{attrs:{to:"/user/"+t.login_user.username}},[t._v("Profile")])],1),n("li",[n("router-link",{attrs:{to:"/setting/"}},[t._v("Setting")])],1),n("li",[n("router-link",{attrs:{to:"/logout/"}},[t._v("Logout")])],1)])])],1):n("div",{staticClass:"nav-visitor right"},[n("div",{staticClass:"btn nav-btn-box"},[n("router-link",{attrs:{to:"/login"}},[t._v("Login")])],1)])],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page page-login"},[t.msg?n("div",{staticClass:"info block"},[t._v("\n\t\t"+t._s(t.msg)+"\n\t")]):t._e(),n("div",{staticClass:"vendors block"},[n("p",[n("span",{staticClass:"btn",on:{click:function(e){t.login("github")}}},[n("i",{staticClass:"fa fa-github"}),t._v(" Login with Github\n\t\t\t")])]),n("p",[n("span",{staticClass:"btn",on:{click:function(e){t.login("twitter")}}},[n("i",{staticClass:"fa fa-twitter"}),t._v(" Login with Twitter\n\t\t\t")])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"modal"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.dialog,expression:"dialog"}],staticClass:"full trans_200",attrs:{id:"dialog"}},[n("div",{staticClass:"dialog-mask full",on:{click:t.closeDialog}}),"add_tag"===t.dialog?n("div",{staticClass:"add-tag dialog block trans_200"},[n("header",{staticClass:"pad-lr-10"},[t._v("Add Tag")]),n("div",{staticClass:"tag-list pad-lr-10"},t._l(t.tag_list,function(e){return n("span",{staticClass:"tag rad-4 btn btn-blue-h-b"},[t._v(t._s(e.name))])})),n("div",{staticClass:"tag-input pad-lr-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.tag.name,expression:"tag.name"}],ref:"add_tag",attrs:{type:"text",placeholder:"name"},domProps:{value:t.tag.name},on:{input:function(e){e.target.composing||(t.tag.name=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.tag.path,expression:"tag.path"}],attrs:{type:"text",placeholder:"path"},domProps:{value:t.tag.path},on:{input:function(e){e.target.composing||(t.tag.path=e.target.value)}}})]),n("div",{staticClass:"btn-group flex around_center"},[n("span",{staticClass:"btn btn-tealBlue",on:{click:t.addTag}},[t._v("ADD")]),n("span",{staticClass:"btn btn-tealBlue-h-b",on:{click:t.closeDialog}},[t._v("CANCEL")])])]):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:"add_category"===t.dialog,expression:"dialog==='add_category'"}],staticClass:"add-category dialog block trans_200"},[n("header",{staticClass:"pad-lr-10"},[t._v("Add Category\n      "),n("span",{staticClass:"right",on:{click:t.closeDialog}},[n("i",{staticClass:"btn fa fa-close right"})])]),n("div",{staticClass:"category-list pad-lr-10"},t._l(t.category_list,function(e){return n("span",{staticClass:"tag rad-4 btn btn-blue-h-b"},[t._v(t._s(e.name))])})),n("div",{staticClass:"category-input pad-lr-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.category.name,expression:"category.name"}],ref:"add_category",attrs:{type:"text",placeholder:"name"},domProps:{value:t.category.name},on:{input:function(e){e.target.composing||(t.category.name=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.category.path,expression:"category.path"}],attrs:{type:"text",placeholder:"path"},domProps:{value:t.category.path},on:{input:function(e){e.target.composing||(t.category.path=e.target.value)}}})]),n("div",{staticClass:"btn-group flex around_center"},[n("span",{staticClass:"btn btn-green",on:{click:t.addCategory}},[t._v("ADD")]),n("span",{staticClass:"btn btn-green-h-b",on:{click:t.closeDialog}},[t._v("CANCEL")])])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page page-404"},[n("div",{staticClass:"wide-screen"},[n("div",{staticClass:"block main flex middle_center redirect_col"},[n("div",{staticClass:"title"},[t._v("4-Missing-0-Node-4")]),n("div",{staticClass:"redirect"},[n("router-link",{staticClass:"blue",attrs:{to:"/"}},[t._v("Back to Home")])],1)])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("nav-bar"),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1),n("foot-bar"),n("w-dialog")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{})},staticRenderFns:[]}},function(t,e){t.exports=function(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=o[0],s=o[1],c=o[2],u=o[3],l={id:t+":"+i,css:s,media:c,sourceMap:u};r[a]?r[a].parts.push(l):n.push(r[a]={id:a,parts:[l]})}return n}},,function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],r=l[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(o(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{for(var a=[],i=0;i<n.parts.length;i++)a.push(o(n.parts[i]));l[n.id]={id:n.id,refs:1,parts:a}}}}function i(){var t=document.createElement("style");return t.type="text/css",f.appendChild(t),t}function o(t){var e,n,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(_)return h;r.parentNode.removeChild(r)}if(m){var o=p++;r=d||(d=i()),e=a.bind(null,r,o,!1),n=a.bind(null,r,o,!0)}else r=i(),e=s.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}function a(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=v(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function s(t,e){var n=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u=n(98),l={},f=c&&(document.head||document.getElementsByTagName("head")[0]),d=null,p=0,_=!1,h=function(){},m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n){_=n;var i=u(t,e);return r(i),function(e){for(var n=[],o=0;o<i.length;o++){var a=i[o],s=l[a.id];s.refs--,n.push(s)}e?(i=u(t,e),r(i)):i=[];for(var o=0;o<n.length;o++){var s=n[o];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete l[s.id]}}}};var v=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()}],[49]);