webpackJsonp([1],{106:function(t,e,s){s(137);var i=s(1)(s(122),s(152),null,null);t.exports=i.exports},108:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["e","mode"]}},109:function(t,e,s){e=t.exports=s(100)(),e.push([t.i,".topic-item{border-bottom:1px solid #e2e2e2;height:50px;line-height:50px}.topic-item:hover{background-color:rgba(0,0,0,.05)}.topic-item .avatar{width:35px;height:35px}.topic-item .at-top,.topic-item .category{padding:2px 5px;color:#fff;background-color:#80bd01;border-radius:4px;line-height:20px;margin-right:5px;min-width:35px;text-align:center}.topic-item .category{font-size:.8em}.topic-item .title{min-width:66%}.topic-item a:hover{text-decoration:underline}.topic-item a:visited{color:#778087}.topic-item .count{font-size:.8em;width:60px;text-align:center}.topic-item .count .rc{color:#007aff;font-size:.8em}.topic-item .count .pv{font-size:.7em;color:#abadbb}.topic-item .last-reply{color:#778087;font-size:.7em}",""])},110:function(t,e,s){var i=s(109);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s(101)("6d2a6fa6",i,!0)},111:function(t,e,s){s(110);var i=s(1)(s(108),s(112),null,null);t.exports=i.exports},112:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"topic-item flex align_center trans_200 pad-lr-10"},["user_topics"!==t.mode?s("router-link",{attrs:{to:"/user/"+t.e.authorInfo.username}},[s("div",{staticClass:"avatar"},[s("img",{attrs:{width:"35",src:t.e.authorInfo.avatar}})])]):t._e(),s("span",{staticClass:"count"},[s("em",{staticClass:"rc"},[t._v(t._s(t.e.replyCount))]),t._v(" /\n    "),s("span",{staticClass:"pv"},[t._v(t._s(t.e.visitCount))])]),t.mode&&-1!==t.mode.indexOf("user_")?t._e():s("span",[t.e.top?s("span",{staticClass:"at-top"},[t._v("TOP")]):s("span",{staticClass:"category"},[t._v(t._s(t.e.categoryInfo.name))])]),s("span",{staticClass:"title ellipsis flex_1"},[s("router-link",{attrs:{to:"/topic/"+t.e.path}},[t._v(t._s(t.e.title))])],1),t.mode&&-1!==t.mode.indexOf("user_")?t._e():s("div",{staticClass:"last-reply self_end"},[s("b",[t._v(t._s(t._f("std2timeAgo")(t.e.lastReplyAt)))]),t._v(" ago\n  ")])],1)},staticRenderFns:[]}},116:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["e"]}},117:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["e","topic"]}},122:function(t,e,s){"use strict";function i(t){var e=t.state.route.params.username;return t.dispatch("fetch_user",e).then(function(e){return t.dispatch("fetch_user_topics")})}Object.defineProperty(e,"__esModule",{value:!0});var r=s(111),a=s.n(r),o=s(146),n=s.n(o),l=s(147),c=s.n(l),u=s(4),p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t};e.default={name:"view-user",components:{TopicItem:a.a,UserItem:n.a,UserReplyItem:c.a},preFetch:i,data:function(){return{tab_curr:"topic"}},computed:p({},s.i(u.mapGetters)(["user_curr","user_curr_topics","user_curr_replys","user_curr_favorites","user_curr_followings","user_curr_followers","login_user"]),{is_following:function(){return this.$store.getters.user_curr_is_following}}),watch:{"$route.params.username":function(){return this.tab_curr="topic",i(this.$store)}},methods:{switchTab:function(t){if(this.tab_curr!==t)return this.tab_curr=t,this.$store.dispatch("fetch_user_"+t+"s")},followUser:function(){var t=this;if(this.login_user._id){var e=this.user_curr._id;return this.$store.dispatch("follow_user",{id:e,action:this.is_following?"unfollow":"follow"}).then(function(s){200===s.code&&(t.$store.dispatch("is_following",{id:e}),t.$store.dispatch("fetch_user_followers"))})}sessionStorage.redirect=location.href,sessionStorage.info="You need to login to follow the user.",this.$router.push("/login")}},beforeMount:function(){var t=this;this.$root._isMounted?i(this.$store).then(function(){t.user_curr._id||t.$router.push("/404")}):this.user_curr._id||this.$router.push("/404")},mounted:function(){if(this.login_user._id&&this.user_curr._id&&this.login_user._id!==this.user_curr._id)return store.dispatch("is_following",{id:id})}}},123:function(t,e,s){e=t.exports=s(100)(),e.push([t.i,".user-item{position:relative;border-bottom:1px solid #e2e2e2}.user-item .avatar{position:absolute;top:10px;left:10px;width:50px;height:50px}.user-item .basic-count,.user-item .basic-info{font-size:.9em;margin-left:60px;line-height:25px}.user-item .basic-count span,.user-item .basic-info span{margin-right:10px}.user-item .name{font-weight:700;font-size:1.3em}.user-item .bio{color:#abadbb}",""])},127:function(t,e,s){e=t.exports=s(100)(),e.push([t.i,".view-user .profile{position:relative}.view-user .profile .avatar{position:absolute;width:80px;height:80px}.view-user .profile .btn-group{position:absolute;right:10px}.view-user .profile .btn-group .btn{padding:4px 12px}.view-user .profile .basic-info{margin-left:90px;height:45px}.view-user .profile .basic-info .name{line-height:1.5em}.view-user .profile .basic-info .bio{color:#333;font-size:.8em}.view-user .profile .basic-count{margin-left:90px;height:35px}.view-user .profile .basic-count>span{display:inline-block;margin-right:20px;height:100%;line-height:35px;text-align:center;font-size:.9em}.view-user .tab-panel .tabs{color:#abadbb;height:40px}.view-user .tab-panel .tabs .tab{height:100%;line-height:40px;text-align:center;-ms-flex-positive:1;flex-grow:1;border-bottom:1px solid #e2e2e2;transition:color .2s ease}.view-user .tab-panel .tabs .tab.active{color:#000;border-bottom:3px solid #000}.view-user .tab-panel .panels .panel{height:700px;overflow:auto}.view-user .tab-panel .panels .panel .panel-empty-data{line-height:70px;text-align:center}.view-user .tab-panel .panels .panel .panel-empty-data span{padding:8px 20px;background-color:#e1e1e1;border-radius:4px}",""])},130:function(t,e,s){e=t.exports=s(100)(),e.push([t.i,".user-reply-box{position:relative;border-bottom:1px solid #e2e2e2}.user-reply-box .time{font-size:.8em}.user-reply-box .content{padding:2px 5px;line-height:24px;background-color:#eaebed}.user-reply-box .topic-title{color:#007aff}",""])},133:function(t,e,s){var i=s(123);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s(101)("51c3a2ba",i,!0)},137:function(t,e,s){var i=s(127);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s(101)("23f72ef0",i,!0)},140:function(t,e,s){var i=s(130);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s(101)("679c78e8",i,!0)},146:function(t,e,s){s(133);var i=s(1)(s(116),s(148),null,null);t.exports=i.exports},147:function(t,e,s){s(140);var i=s(1)(s(117),s(155),null,null);t.exports=i.exports},148:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-item pad-10"},[s("router-link",{attrs:{to:"/user/"+t.e.username}},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:t.e.avatar}})])]),s("div",{staticClass:"basic-info"},[s("div",{staticClass:"name ellipsis"},[s("router-link",{attrs:{to:"/user/"+t.e.username}},[t._v(t._s(t.e.displayName))])],1),s("div",{staticClass:"bio ellipsis"},[t._v(t._s(t.e.bio||"nothing left and nothing right"))])])],1)},staticRenderFns:[]}},152:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"view view-user"},[s("div",{staticClass:"wide-screen"},[s("main",[s("div",{staticClass:"profile block main pad-10"},[s("div",{staticClass:"avatar"},[s("router-link",{attrs:{to:"/user/"+t.user_curr.username}},[s("img",{attrs:{src:t.user_curr.avatar}})])],1),s("div",{staticClass:"btn-group"},[t.login_user._id===t.user_curr._id?s("router-link",{attrs:{to:"/edit/user/"+t.user_curr.username}},[s("div",{staticClass:"btn btn-edit"},[s("i",{staticClass:"fa fa-pencil"})])]):s("div",[s("div",{staticClass:"btn btn-tealBlue btn-follow",on:{click:t.followUser}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.is_following?"unfollow":"follow")+"\n\t\t\t\t\t\t")])])],1),s("div",{staticClass:"basic-info"},[s("b",{staticClass:"name"},[t._v(t._s(t.user_curr.displayName))]),s("br"),s("div",{staticClass:"bio ellipsis"},[t._v(t._s(t.user_curr.bio))])]),s("div",{staticClass:"basic-count"},[s("span",[s("b",[t._v(t._s(t.user_curr_topics.length))]),t._v(" Topics")]),t.user_curr.favorites?s("span",[s("b",[t._v(t._s(t.user_curr.favorites.length))]),t._v(" Favorites")]):t._e(),t.user_curr.followers?s("span",[s("b",[t._v(t._s(t.user_curr.followers.length))]),t._v(" Followers")]):t._e(),t.user_curr.followings?s("span",[s("b",[t._v(t._s(t.user_curr.followings.length))]),t._v(" Followings")]):t._e()])]),s("div",{staticClass:"tab-panel block main"},[s("div",{staticClass:"tabs flex middle_center"},[s("div",{staticClass:"tab",class:{active:"topic"===t.tab_curr},on:{click:function(e){t.switchTab("topic")}}},[t._v("Topics")]),s("div",{staticClass:"tab",class:{active:"favorite"===t.tab_curr},on:{click:function(e){t.switchTab("favorite")}}},[t._v("Favorites")]),s("div",{staticClass:"tab",class:{active:"follower"===t.tab_curr},on:{click:function(e){t.switchTab("follower")}}},[t._v("Followers")]),s("div",{staticClass:"tab",class:{active:"following"===t.tab_curr},on:{click:function(e){t.switchTab("following")}}},[t._v("Followings")]),s("div",{staticClass:"tab",class:{active:"reply"===t.tab_curr},on:{click:function(e){t.switchTab("reply")}}},[t._v("Replies")])]),s("div",{staticClass:"panels"},["topic"===t.tab_curr?s("div",{staticClass:"panel"},[t.user_curr_topics.length?t._e():s("div",{staticClass:"panel-empty-data"},[s("span",[s("b",[t._v(t._s(t.user_curr.displayName))]),t._v(" has no topics yet.")])]),t.user_curr_topics.length?s("div",{staticClass:"panel-topic"},t._l(t.user_curr_topics,function(t){return s("topic-item",{attrs:{e:t,mode:"user_topics"}})})):t._e()]):t._e(),"favorite"===t.tab_curr?s("div",{staticClass:"panel"},[t.user_curr_favorites.length?s("div",{staticClass:"panel-favorite"},t._l(t.user_curr_favorites,function(t){return s("topic-item",{staticClass:"user-topic",attrs:{e:t,mode:"user_favorites"}})})):s("div",{staticClass:"panel-empty-data"},[s("span",[s("b",[t._v(t._s(t.user_curr.displayName))]),t._v(" has no favorite topics.")])])]):t._e(),"follower"===t.tab_curr?s("div",{staticClass:"panel"},[t.user_curr_followers.length?s("div",{staticClass:"panel-follower"},t._l(t.user_curr_followers,function(t){return s("user-item",{attrs:{e:t}})})):s("div",{staticClass:"panel-empty-data"},[s("span",[s("b",[t._v(t._s(t.user_curr.displayName))]),t._v(" has no followers.")])])]):t._e(),"following"===t.tab_curr?s("div",{staticClass:"panel"},[t.user_curr_followings.length?s("div",{staticClass:"panel-following"},t._l(t.user_curr_followings,function(t){return s("user-item",{attrs:{e:t}})})):s("div",{staticClass:"panel-empty-data"},[s("span",[s("b",[t._v(t._s(t.user_curr.displayName))]),t._v(" has no following users.")])])]):t._e(),"reply"===t.tab_curr?s("div",{staticClass:"panel"},[t.user_curr_replys.length?t._e():s("div",{staticClass:"panel-empty-data"},[s("span",[s("b",[t._v(t._s(t.user_curr.displayName))]),t._v(" has no replies yet.")])]),t.user_curr_replys.length?s("div",{staticClass:"panel-reply"},t._l(t.user_curr_replys,function(t){return s("user-reply-item",{key:t._id,staticClass:"user-reply",attrs:{topic:t.topicInfo,e:t}})})):t._e()]):t._e()])])])])])},staticRenderFns:[]}},155:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-reply-box pad-10",attrs:{id:t.e._id}},[s("router-link",{staticClass:"md-body",attrs:{to:"/topic/"+t.topic.path+"#reply_"+t.e._id}},[s("span",{staticClass:"content rad-4"},[t._v(t._s(t._f("ellipsis")(t.e.content)))]),s("br"),t._v("in "),s("b",{staticClass:"topic-title"},[t._v(t._s(t._f("ellipsis")(t.topic.path)))])]),s("span",{staticClass:"time right"},[t._v(t._s(t._f("std2hiDdmy")(t.e.createAt)))])],1)},staticRenderFns:[]}}});