webpackJsonp([0],{104:function(t,e,i){i(142);var r=i(1)(i(120),i(157),null,null);t.exports=r.exports},107:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(11),s=i.n(r),o=[];(new s.a.Renderer).heading=function(t,e){var i=t.toLowerCase().replace(/\s+/g,"-");return o.push({level:e,slug:i,title:t}),"<h"+e+"><a href='#"+i+"' id='"+i+"' class='anchor'></a><a href='#"+i+"'>"+t+"</a></h"+e+">"};var a=function(t){var e=s.a.lexer(t);return t=s.a.parser(e).replace(/<pre>/gi,'<pre class="hljs">')}},113:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),s=(i(107),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t});e.default={data:function(){return{content:"",type:"text",action:"create",replyTo:"Topic"}},computed:s({},i.i(r.mapGetters)(["reply_curr","login_user","topic_curr"])),watch:{reply_curr:function(){this.reply_curr.replyToUsername?(this.content="",this.type="text",this.replyTo=this.reply_curr.replyToUsername,this.action="create"):this.reply_curr.type?(this.content=this.reply_curr.content,this.type=this.reply_curr.type,this.replyTo="Topic",this.action="update"):(this.content="",this.type="text",this.replyTo="Topic",this.action="create"),document.querySelector(".edit-reply-box textarea").focus()}},methods:{switchType:function(){"text"===this.type?this.type="marked":this.type="text"},replyTopic:function(){var t=this;if(this.login_user._id){if(""===this.content)return this.$store.dispatch("logger",{code:400,note:"empty reply content"});var e=void 0,i={content:this.content,type:this.type,topicId:this.topic_curr._id};this.reply_curr.replyToUsername&&(i.replyToUsername=this.reply_curr.replyToUsername),"update"===this.action&&(e=this.reply_curr._id),this.$store.dispatch(this.action+"_reply",{id:e,body:i}).then(function(e){if(!(e.code>200)){t.content="",t.type="",t.$store.dispatch("edit_reply");var r={topicId:i.topicId};return t.$store.dispatch("fetch_topic_replys",{criteria:r})}})}else sessionStorage.redirect=location.href,sessionStorage.info="You need to login to reply a topic.",this.$router.push("/login")}}}},114:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};e.default={props:["e","topicId"],computed:s({},i.i(r.mapGetters)(["login_user","user_curr"]))}},115:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(107);e.default={props:["e","author","mode"],computed:{login_user:function(){return this.$store.getters.login_user},avatar:function(){return this.e.authorInfo.avatar},username:function(){return this.e.authorInfo.username},content:function(){return"text"===this.e.type?this.e.content:i.i(r.a)(this.e.content)}},methods:{replyTo:function(t){this.$store.dispatch("reply_reply",t)},editReply:function(t){this.$store.dispatch("edit_reply",t)}}}},120:function(t,e,i){"use strict";function r(t){var e=t.state.route.params.path;return t.dispatch("fetch_topic",{path:e}).then(function(e){if(!(e.code>399)){var i=e.data._id;return e.data.authorInfo.username&&i?Promise.all([t.dispatch("fetch_topic_replys",{criteria:{topicId:i}})]):void 0}})}Object.defineProperty(e,"__esModule",{value:!0});var s=i(4),o=i(145),a=i.n(o),n=i(144),p=i.n(n),c=i(143),l=i.n(c),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};e.default={name:"view-topic",components:{ReplyItem:a.a,UserBox:p.a,EditReply:l.a},metaInfo:function(){return{title:this.topic_curr.title,meta:[{name:"description",content:"topic_curr.summary"}]}},preFetch:r,computed:u({liked:function(){return this.login_user&&this.topic_curr.likedUsers.includes(this.login_user._id)}},i.i(s.mapGetters)(["topic_curr","topic_prev","topic_next","topic_curr_replys","login_user","reply_list"])),watch:{"$route.params.path":function(){return r(this.$store)}},methods:{favoriteTopic:function(){var t=this;if(this.login_user){var e=this.topic_curr._id,i=this.liked?"unfavorite":"favorite";this.$store.dispatch("favorite_topic",{id:e,action:i}).then(function(e){if(!(e>200)){var r=t.login_user._id;t.$store.dispatch("_favorite_topic",{userId:r,action:i})}})}else sessionStorage.redirect=location.href,sessionStorage.info="You need to login to like your favorite topics.",this.$router.push("/login")},openShareBox:function(){}},beforeMount:function(){var t=this;this.$root._isMounted?r(this.$store).then(function(){t.topic_curr._id||t.$router.push("/404")}):this.topic_curr._id||this.$router.push("/404")},mounted:function(){"undefined"!=typeof twttr&&/twitter-tweet/.test(this.topic_curr.content)&&twttr.widgets.load(),"undefined"!=typeof instgrm&&/instagram-media/.test(this.topic_curr.content)&&instgrm.Embeds.process()}}},124:function(t,e,i){e=t.exports=i(100)(),e.push([t.i,".reply-box{position:relative;border-bottom:1px solid #e2e2e2}.reply-box .header{margin-left:50px;margin-right:60px;line-height:18px}.reply-box .header .username{font-size:.9em;margin-right:1em}.reply-box .header .time{color:#7186c7;font-size:.75em}.reply-box .content{margin-left:50px;font-size:.85em}.reply-box .avatar{position:absolute;top:10px;left:10px;width:35px;height:35px}.reply-box .btn-group{position:absolute;top:0;right:10px;bottom:0}",""])},126:function(t,e,i){e=t.exports=i(100)(),e.push([t.i,".edit-reply-box .reply-to{display:inline-block;max-width:450px;padding-top:10px}.edit-reply-box .btn-icon{padding:4px}.edit-reply-box .btn-icon i{vertical-align:middle}.edit-reply-box .btn{margin:6px 0 6px 10px;padding:4px 12px}.edit-reply-box .row textarea{border-color:#eaebed;width:100%;min-height:100px}",""])},129:function(t,e,i){e=t.exports=i(100)(),e.push([t.i,".user-box header{line-height:40px}.user-box .avatar{height:48px;width:48px}.user-box .username{margin-left:1em;max-width:180px;font-size:.9em;white-space:nowrap}.user-box .btn-group .btn{padding:4px 12px}",""])},132:function(t,e,i){e=t.exports=i(100)(),e.push([t.i,".view-topic main .topic-header{position:relative;padding-top:6px;padding-bottom:6px}.view-topic main .topic-header a:hover{text-decoration:underline}.view-topic main .topic-header .ellipsis{padding-left:68px;padding-right:60px}.view-topic main .topic-header .title{line-height:1.5em;color:#1f3f99;font-size:1.2em;font-weight:700}.view-topic main .topic-header .subtitle{line-height:1.5em;font-size:.8em;color:#abadbb}.view-topic main .topic-header .subtitle span{margin-right:1.5rem}.view-topic main .topic-header .btn-group{top:0;right:10px}.view-topic main .topic-header .btn-group .btn-like{line-height:55px}.view-topic main .topic-header .btn-group .btn-like .fa{color:#ff3b30}.view-topic main .topic-header .btn-group .btn-like span{margin-left:10px}.view-topic main .topic-header .btn-group .btn-edit,.view-topic main .topic-header .btn-group .btn-share{padding:4px 12px}.view-topic main .topic-header .avatar{position:absolute;left:10px;top:6px;width:48px;height:48px}.view-topic main .topic-header .pv{position:absolute;line-height:20px;top:66px;font-size:.7em}.view-topic main .topic-header .pv b{font-size:.8rem}.view-topic main .topic-header .btn-group{position:absolute}.view-topic main .topic-header .tags{margin-top:10px}.view-topic main .topic-header .tag{margin:2px 5px 2px 0;padding:2px 5px;font-size:.8em}.view-topic main article{border-top:1px solid #e2e2e2;border-bottom:1px solid #e2e2e2}.view-topic .replies{margin-top:10px;margin-bottom:10px;line-height:40px}",""])},134:function(t,e,i){var r=i(124);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);i(101)("62672b80",r,!0)},136:function(t,e,i){var r=i(126);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);i(101)("0f2e815c",r,!0)},139:function(t,e,i){var r=i(129);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);i(101)("7d924130",r,!0)},142:function(t,e,i){var r=i(132);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);i(101)("69206ad0",r,!0)},143:function(t,e,i){i(136);var r=i(1)(i(113),i(151),null,null);t.exports=r.exports},144:function(t,e,i){i(139);var r=i(1)(i(114),i(154),null,null);t.exports=r.exports},145:function(t,e,i){i(134);var r=i(1)(i(115),i(149),null,null);t.exports=r.exports},149:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reply-box pad-10",attrs:{id:"reply_"+t.e._id}},[i("a",{attrs:{href:"#reply_"+t.e._id}}),i("div",{staticClass:"avatar"},[i("router-link",{attrs:{to:"/user/"+t.username}},[i("img",{attrs:{src:t.avatar,alt:""}})])],1),i("div",{staticClass:"header"},[i("router-link",{staticClass:"username",attrs:{to:"/user/"+t.username}},[i("b",[t._v(t._s(t.username))])]),i("span",{staticClass:"time"},[t._v(t._s(t._f("std2hiDdmy")(t.e.createAt)))]),t.e.createAt!==t.e.updateAt?i("span",{staticClass:"time"},[t._v(", edit "+t._s(t._f("std2timeAgo")(t.e.updateAt))+" ago")]):t._e()],1),i("div",{staticClass:"content md-body"},[t.e.replyToUsername?i("router-link",{attrs:{to:"/user/"+t.e.replyToUsername}},[t._v("@"+t._s(t.e.replyToUsername))]):t._e(),t._v(" \n    "+t._s("text"===t.e.type?t.content:"")+"\n    "),"text"!==t.e.type?i("div",{domProps:{innerHTML:t._s(t.content)}}):t._e()],1),i("div",{staticClass:"btn-group"},[t.e.authorId===t.login_user._id?i("span",{staticClass:"btn btn-edit",on:{click:function(e){t.editReply(t.e._id)}}},[i("i",{staticClass:"fa fa-edit"})]):t._e(),i("span",{staticClass:"btn btn-reply",on:{click:function(e){t.replyTo(t.username)}}},[i("i",{staticClass:"fa fa-reply"})])])])},staticRenderFns:[]}},151:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-reply-box"},[i("header",{staticClass:"pad-lr-10"},[i("span",{staticClass:"reply-to ellipsis"},[t._v("Reply to \n\t\t"),i("b",[t._v(t._s(t.replyTo))])]),i("div",{staticClass:"btn-group right"},[i("span",{staticClass:"btn-icon",on:{click:t.switchType}},[i("i",{staticClass:"fa trans_200 fa-2x",class:"text"===t.type?"fa-toggle-off":"fa-toggle-on"})]),i("span",{staticClass:"btn btn-reply btn-tealBlue",on:{click:t.replyTopic}},[t._v(t._s(t.action))])])]),i("div",{staticClass:"ctrl"}),i("div",{staticClass:"row pad-10"},[i("div",{staticClass:"edit-area"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"rad-4",domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])])])},staticRenderFns:[]}},154:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-box block"},[i("header",{staticClass:"pad-lr-10"},[t._v("AUTHOR")]),i("div",{staticClass:"pad-10 flex align_center"},[i("router-link",{staticClass:"avatar",attrs:{to:"/user/"+t.e.username}},[i("img",{attrs:{src:t.e.avatar}})]),i("span",{staticClass:"username"},[i("router-link",{attrs:{to:"/user/"+t.e.username}},[i("b",[t._v(t._s(t.e.username))])])],1)],1),i("div",{staticClass:"btn-group pad-10 flex around_center"})])},staticRenderFns:[]}},157:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"view view-topic"},[i("div",{staticClass:"wide-screen row"},[t.topic_curr._id?i("main",{staticClass:"block"},[i("div",{staticClass:"topic-header pad-lr-10"},[i("div",{staticClass:"title ellipsis"},[t._v(t._s(t.topic_curr.title))]),i("div",{staticClass:"subtitle ellipsis"},[i("span",[i("router-link",{attrs:{to:"/user/"+t.topic_curr.authorInfo.username}},[i("b",[t._v(t._s(t.topic_curr.authorInfo.username))])])],1),i("span",[t._v("Published "),i("b",[t._v(t._s(t._f("std2hiDdmy")(t.topic_curr.createAt)))])]),i("span",[t._v("From \n\t\t\t\t\t\t"),i("router-link",{attrs:{to:"/?category="+t.topic_curr.categoryInfo.path}},[i("b",[t._v(t._s(t.topic_curr.categoryInfo.name))])])],1)]),i("div",{staticClass:"tags ellipsis"},t._l(t.topic_curr.tagsInfo,function(e){return i("span",{staticClass:"tag btn rad-4 btn-blue"},[t._v(t._s(e.name))])})),i("router-link",{staticClass:"avatar",attrs:{to:"/user/"+t.topic_curr.authorInfo.username}},[i("img",{attrs:{src:t.topic_curr.authorInfo.avatar}})]),i("span",{staticClass:"pv"},[i("b",[t._v(t._s(t._f("fmtNum")(t.topic_curr.visitCount)))]),t._v(" views")]),i("div",{staticClass:"btn-group right"},[i("span",{staticClass:"btn-like",on:{click:t.favoriteTopic}},[i("i",{staticClass:"fa hover_scale",class:t.liked?"fa-heart":"fa-heart-o"}),i("span",[t._v(t._s(t._f("fmtNum")(t.topic_curr.likedUsers.length)))])]),i("br"),t.login_user._id===t.topic_curr.authorId?i("router-link",{attrs:{to:"/edit/topic/"+t.topic_curr.path}},[i("span",{staticClass:"btn btn-edit btn-blue-h-b"},[t._v("Edit")])]):i("span",{staticClass:"btn btn-share btn-blue-h-b",on:{click:t.openShareBox}},[t._v("Share")])],1)],1),i("article",{staticClass:"topic pad-lr-20 md-body"},[i("div",{domProps:{innerHTML:t._s(t.topic_curr.content)}}),i("div",{staticClass:"hide",attrs:{id:"widget-script"}})]),i("footer",{staticClass:"pager pad-lr-10"},[t.topic_prev._id?i("router-link",{attrs:{to:"/topic/"+t.topic_prev.path}},[i("span",{staticClass:"btn btn-tealBlue left ellipsis"},[i("i",{staticClass:"fa fa-angle-double-left"}),t._v("\n\t\t\t\t  "+t._s(t.topic_prev.title))])]):t._e(),t.topic_next._id?i("router-link",{attrs:{to:"/topic/"+t.topic_next.path}},[i("span",{staticClass:"btn btn-tealBlue right ellipsis"},[t._v("\n\t\t\t\t\t"+t._s(t.topic_next.title)+" \n\t\t\t\t\t"),i("i",{staticClass:"fa fa-angle-double-right"})])]):t._e()],1)]):t._e(),i("div",{staticClass:"block replies"},[i("header",{staticClass:"pad-lr-10"},[t.topic_curr.allowComment?i("span",[i("b",[t._v(t._s(t.topic_curr_replys.length))]),t._v(" Relies")]):i("span",[t._v("Comments not allowed")])]),t.topic_curr_replys.length?i("div",{staticClass:"reply_list"},t._l(t.topic_curr_replys,function(t){return i("reply-item",{key:t._id,attrs:{e:t}})})):t._e()]),t.topic_curr.allowComment&&t.login_user._id?i("edit-reply",{staticClass:"block"}):t._e()],1)])},staticRenderFns:[]}}});